define ("block_appreciation/content",["jquery","core/log","core/ajax"],function(a,b,c){"use strict";function d(a,b){var c=this;c.rootel=a;c.instanceid=b}d.prototype.main=function(){var b=this;b.rootel.on("click",".post .action-approve",function(c){c.preventDefault();var d=a(this);b.approve(d)});b.rootel.on("click",".post .action-delete",function(c){c.preventDefault();var d=a(this);b.delete(d)})};d.prototype.approve=function(a){var d=this,e=a.closest(".post"),f=e.data("id");e.addClass("submitting");c.call([{methodname:"block_appreciation_approve_post",args:{id:f},done:function done(){e.removeClass("submitting");e.removeClass("unapproved")},fail:function fail(a){e.removeClass("submitting");b.error("block_appreciation/content: failed to approve the post");b.debug(a)}}])};d.prototype.delete=function(a){var d=this,e=a.closest(".post"),f=e.data("id");e.addClass("submitting");c.call([{methodname:"block_appreciation_delete_post",args:{id:f},done:function done(){e.removeClass("submitting");e.addClass("removing");e.fadeOut(1e3,function(){e.remove()})},fail:function fail(a){e.removeClass("submitting");b.error("block_appreciation/content: failed to delete the post");b.debug(a)}}])};return{init:function(c){b.debug("block_appreciation/content: initializing");var e=a("[data-region=\"block_appreciation-instance-"+c+"\"]").first();if(!e.length){b.error("block_appreciation/control: wrapping region not found!");return}var f=new d(e,c);f.main()}}});
//# sourceMappingURL=content.min.js.map
